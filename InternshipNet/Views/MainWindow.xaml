<Window x:Class="InternshipNet.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:InternshipNet"
        xmlns:userControls="clr-namespace:InternshipNet.UserControls" xmlns:local1="clr-namespace:InternshipNet.Converters"
        mc:Ignorable="d"
        Title="InternshipNet Platform" Height="450" Width="800">

    <Window.Resources>
        <local1:NullToVisibilityConverter x:Key="NullToVisibilityConverter"/>
    </Window.Resources>

    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Ліва панель: Список стажувань -->
        <StackPanel Grid.Column="0">
            <TextBlock Text="Internships" FontSize="16" FontWeight="Bold" Margin="0,0,0,5"/>

            <!-- ДОДАНО: Панель з кнопками -->
            <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                <Button Content="Save" Command="{Binding SaveCommand}" Margin="0,0,5,0"/>
                <Button Content="Load" Command="{Binding LoadCommand}"/>
            </StackPanel>

            <ListBox ItemsSource="{Binding Internships}" 
             SelectedItem="{Binding SelectedInternship}"
             Height="320">
                <!-- Зменшив висоту, щоб вмістились кнопки -->
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <!-- Тепер ми явно передаємо дані у властивість 'Internship' -->
                        <userControls:InternshipListItem Internship="{Binding}"/>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </StackPanel>

        <!-- Права панель: Деталі обраного стажування -->
        <!-- Вона буде видима тільки якщо стажування обрано -->
        <Grid Grid.Column="1" Margin="10,0,0,0" DataContext="{Binding SelectedInternship}">
            <!-- Використовуємо Visibility, щоб панель зникала, якщо нічого не обрано -->
            <StackPanel Visibility="{Binding Converter={StaticResource NullToVisibilityConverter}}">
                <TextBlock Text="Internship Details" FontSize="16" FontWeight="Bold" Margin="0,0,0,10"/>

                <TextBlock Text="Company:" FontWeight="Bold"/>
                <TextBlock Text="{Binding CompanyName}" Margin="0,0,0,10"/>

                <TextBlock Text="Description:" FontWeight="Bold"/>
                <TextBlock Text="{Binding Description}" TextWrapping="Wrap" Margin="0,0,0,10"/>

                <TextBlock Text="Applications:" FontWeight="Bold"/>

                <!-- ДОДАНО: Кнопка для виклику модального вікна -->
                <Button Content="Add Application" 
                    Command="{Binding DataContext.AddApplicationCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                     HorizontalAlignment="Left" Margin="0,5,0,5"/>

                <DataGrid ItemsSource="{Binding Applications}" 
                    AutoGenerateColumns="True" 
                    IsReadOnly="True" 
                    Height="150"
                    RowStyle="{StaticResource StatusRowStyle}"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>